@page "/"
@layout AuthLayout
@using MudBlazor
@rendermode InteractiveServer
<PageTitle>Iniciar sesión</PageTitle>

<div class="auth-screen">
    <div class="auth-container">
        <div class="auth-form-card">
            <h1 class="auth-title">¡Bienvenido de nuevo!</h1>
            <p class="auth-subtitle">Inicia sesión para acceder a tus datos</p>

            <EditForm Model="@model" OnValidSubmit="HandleLogin" class="auth-form">
                <div class="auth-form-fields">
                <IconInput Id="email"
                           Label="Correo Electrónico"
                           Placeholder="Escribe tu correo"
                           InputType="InputType.Email"
                           LeftIconColor="#dcc17a"
                           OutlineColor="#1e373c"
                           BorderRadius="12px"
                           BorderWidth="2px"
                           @bind-Value="model.Email">
                    <LeftIcon>
                        <MudIcon Icon="@Icons.Material.Outlined.Email" Size="Size.Small" />
                    </LeftIcon>
                </IconInput>

                <IconInput Id="password"
                           Label="Contraseña"
                           Placeholder="Escribe tu contraseña"
                           InputType="InputType.Password"
                           LeftIconColor="#dcc17a"
                           OutlineColor="#1e373c"
                           BorderRadius="12px"
                           BorderWidth="2px"
                           ShowPasswordToggle="true"
                           @bind-Value="model.Password">
                    <LeftIcon>
                        <MudIcon Icon="@Icons.Material.Outlined.Lock" Size="Size.Small" />
                    </LeftIcon>
                    <BottomContent>
                        <div class="auth-forgot">
                            <NavLink href="/forgot-password" class="auth-link">¿Olvidaste tu contraseña?</NavLink>
                        </div>
                    </BottomContent>
                </IconInput>
                </div>
                <MudButton Variant="Variant.Filled"
                          FullWidth="true"
                          Size="Size.Large"
                          Class="auth-submit-btn"
                          Style="background-color: #ffc334; color: #333;"
                          ButtonType="ButtonType.Submit">
                    Iniciar Sesión
                </MudButton>
            </EditForm>

            <div class="auth-divider">También puedes</div>

            <div class="auth-signup-text">
                ¿No tienes una cuenta? <NavLink href="/register" class="auth-link-register">Regístrate</NavLink>
            </div>
        </div>

        <div class="auth-marketing-panel">
            <div class="right-content">
                <h2 class="marketing-title">Tu plataforma de seguros de confianza</h2>
                <p class="marketing-quote">"Un seguro es algo que esperas no necesitar nunca, pero que agradeces tener en el momento justo"</p>
            </div>
            <div class="marketing-logo">LOGO</div>
        </div>
    </div>
</div>

@inject NavigationManager Navigation

@code {
    private LoginModel model = new();

    private void HandleLogin()
    {
        // TODO: Implement login logic (e.g. auth API call)
        Navigation.NavigateTo("/clients", forceLoad: false);
    }

    private class LoginModel
    {
        public string Email { get; set; } = "";
        public string Password { get; set; } = "";
    }
}
