@page "/clients"
@rendermode InteractiveServer
@using MudBlazor

<PageTitle>@pageTitle</PageTitle>

<div class="client-screen">
    <h1 class="client-page-title">@pageTitle</h1>

    @if (currentStep == 1)
    {
        <ClientsComponent1 Model="@clientModel"
                           OnOmitir="OnOmitir"
                           OnSiguiente="OnSiguiente" />
    }
    else if (currentStep == 2)
    {
        <ClientsComponent2 OnOmitir="OnOmitir"
                           OnSiguiente="OnSiguiente" />
    }
    else if (currentStep == 3)
    {
        <ClientsComponent3 Model="@referralModel"
                           OnOmitir="OnOmitir"
                           OnSiguiente="OnSiguiente" />
    }
    else
    {
        <div class="client-form-card">
            <p>Step @currentStep – Add your next component here.</p>
        </div>
    }
</div>

@code {
    private int currentStep = 1;
    private ClientsComponent1.ClientFormModel clientModel = new();
    private ClientsComponent3.ReferralFormModel referralModel = new();

    private string pageTitle => currentStep switch
    {
        1 => "Datos de empresa / Persona Jurídica",
        2 => "Datos de empresa / Persona Jurídica",
        3 => "Datos de Referido",
        _ => "Clientes"
    };

    private void OnOmitir()
    {
        // TODO: Skip step or navigate
    }

    private void OnSiguiente()
    {
        currentStep++;
    }
}
